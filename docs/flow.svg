<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="820" viewBox="0 0 1200 820" role="img" aria-label="UI runtime flow diagram for The Price is Right">
  <defs>
    <style>
      :root { color-scheme: dark; }
      .bg { fill: #0b0c10; }
      .stroke { stroke: #e5e7eb; }
      .stroke-muted { stroke: #9ca3af; }
      .dash { stroke-dasharray: 10 8; }
      .box { fill: rgba(255,255,255,0.02); stroke-width: 2; rx: 18; }
      .inner { fill: rgba(255,255,255,0.03); stroke-width: 2; rx: 14; }
      .panel { fill: rgba(255,255,255,0.03); stroke-width: 2; rx: 14; }
      .thin { stroke-width: 1.5; }
      .mono-xl { font: 700 20px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; fill: #f9fafb; letter-spacing: 0.5px; }
      .mono-lg { font: 700 16px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; fill: #f9fafb; letter-spacing: 0.4px; }
      .mono { font: 600 14px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; fill: #e5e7eb; }
      .mono-sm { font: 600 12px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; fill: #d1d5db; }
      .mono-xs { font: 600 11px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; fill: #cbd5e1; }
      .muted { fill: #9ca3af; }
      .arrow { stroke: #e5e7eb; stroke-width: 2; fill: none; }
      .arrow-muted { stroke: #cbd5e1; stroke-width: 2; fill: none; }
    </style>

    <marker id="arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M 0 0 L 12 6 L 0 12 z" fill="#e5e7eb"/>
    </marker>
    <marker id="arrowhead-muted" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M 0 0 L 12 6 L 0 12 z" fill="#cbd5e1"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect x="0" y="0" width="1200" height="820" class="bg"/>

  <!-- Top: Gradio app -->
  <rect x="70" y="40" width="1060" height="95" class="box stroke dash"/>
  <text x="600" y="82" text-anchor="middle" class="mono-xl">GRADIO WEB APPLICATION</text>
  <text x="600" y="112" text-anchor="middle" class="mono">"The Price is Right"</text>
  <text x="600" y="132" text-anchor="middle" class="mono-xs muted">src/ui/app.py " gr.Blocks(title="The Price is Right")</text>

  <!-- Arrow down into App -->
  <path d="M 600 145 L 600 188" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- App class container -->
  <rect x="110" y="200" width="980" height="520" class="box stroke dash"/>
  <text x="600" y="238" text-anchor="middle" class="mono-lg">APP CLASS</text>
  <text x="600" y="260" text-anchor="middle" class="mono-xs muted">class App " lazy framework + logging + periodic runs</text>

  <!-- Left: lazy load + framework instance -->
  <rect x="150" y="280" width="320" height="130" class="inner stroke dash"/>
  <text x="310" y="322" text-anchor="middle" class="mono">get_agent_framework()</text>
  <text x="310" y="346" text-anchor="middle" class="mono-sm">(Lazy Load)</text>
  <text x="310" y="372" text-anchor="middle" class="mono-xs muted">if not self.agent_framework: DealAgentFramework()</text>

  <rect x="150" y="440" width="320" height="150" class="inner stroke dash"/>
  <text x="310" y="480" text-anchor="middle" class="mono">DealAgentFramework</text>
  <text x="310" y="504" text-anchor="middle" class="mono-sm">Instance</text>
  <text x="310" y="530" text-anchor="middle" class="mono-xs muted">src/core/framework.py " .run() " .memory</text>
  <text x="310" y="552" text-anchor="middle" class="mono-xs muted">init_agents_as_needed() selects planner</text>

  <!-- Right: UI components -->
  <rect x="520" y="280" width="530" height="330" class="panel stroke dash"/>
  <text x="785" y="318" text-anchor="middle" class="mono">UI COMPONENTS</text>

  <rect x="560" y="350" width="235" height="95" class="inner stroke dash"/>
  <text x="678" y="388" text-anchor="middle" class="mono-sm">Dataframe</text>
  <text x="678" y="412" text-anchor="middle" class="mono-xs muted">gr.Dataframe (Deals)</text>

  <rect x="815" y="350" width="205" height="95" class="inner stroke dash"/>
  <text x="917" y="388" text-anchor="middle" class="mono-sm">3D Plot</text>
  <text x="917" y="412" text-anchor="middle" class="mono-xs muted">gr.Plot (Vectors)</text>

  <rect x="560" y="465" width="460" height="120" class="inner stroke dash"/>
  <text x="790" y="505" text-anchor="middle" class="mono-sm">HTML Logs Panel</text>
  <text x="790" y="528" text-anchor="middle" class="mono-xs muted">gr.HTML " scrollable " dark</text>
  <text x="790" y="550" text-anchor="middle" class="mono-xs muted">ANSI ’ HTML via utils.logging.reformat()</text>

  <!-- Connect framework to UI components -->
  <path d="M 470 515 L 520 515" class="arrow" marker-end="url(#arrowhead)"/>
  <text x="495" y="500" text-anchor="middle" class="mono-xs muted">updates</text>

  <!-- Real-time updates: queues + generator -->
  <path d="M 785 730 L 785 630" class="arrow-muted" marker-end="url(#arrowhead-muted)"/>
  <path d="M 815 630 L 815 730" class="arrow-muted" marker-end="url(#arrowhead-muted)"/>
  <text x="800" y="765" text-anchor="middle" class="mono-sm">Real-time Updates</text>
  <text x="800" y="787" text-anchor="middle" class="mono-xs muted">(Queues + Generators)</text>
  <text x="800" y="805" text-anchor="middle" class="mono-xs muted">QueueHandler ’ log_queue " worker thread ’ result_queue</text>

  <!-- Small callouts for the mechanism -->
  <rect x="520" y="625" width="530" height="80" class="panel stroke dash"/>
  <text x="785" y="655" text-anchor="middle" class="mono-xs muted">ui.load(...) and gr.Timer.tick(...) call run_with_logging(...)</text>
  <text x="785" y="678" text-anchor="middle" class="mono-xs muted">update_output(...) yields (log_state, html_logs, deals_table) as data arrives</text>

</svg>

